(function(){"use strict";var e={9414:function(e,t,a){var n=a(9242),l=(a(0),a(5835)),o=(a(5218),a(7486)),r=(a(7349),a(6837)),i=(a(4184),a(3680)),u=(a(5103),a(9122)),s=(a(4629),a(3397)),c=(a(9985),a(8232)),m=a(3396),p=a(4870),d=a(6265),f=a.n(d),v=a(4806),y=a.n(v);const g=0,S=1,x=2,w=3,h=0,U=1,b=2,_=(0,p.qj)(y().defaultsDeep(JSON.parse(localStorage.getItem("profit_config")||"{}"),{time:{type:g,delay:600,interval:3600},strategy:{type:h,manualSettings:{}},expval:3.3}));(0,m.YP)(_,(e=>localStorage.setItem("profit_config",JSON.stringify(e))));const Z=(0,m.Fl)({get(){return _.time.type===S?_.time.delay:_.time.type===x?_.time.interval:null},set(e){return _.time.type===S?_.time.delay=e:_.time.type===x?_.time.interval=e:null}}),T=(0,m.Fl)((()=>e=>_.time.type===g?e:_.time.type===S?e+_.time.delay:_.time.type===x?Math.ceil(e/_.time.interval)*_.time.interval:0));a(9391);var W=a(670),j=(a(5631),a(2704)),k=a(7139);const P=["innerHTML"];var F={__name:"ColorBarTable",props:{columns:Array,showSelection:Boolean,selectionDisabled:Boolean,selection:{type:Array,default:()=>[]},selectionTitle:Object,summary:Object},emits:["update:selection"],setup(e){const t=e;return(a,n)=>((0,m.wg)(),(0,m.j4)((0,p.SU)(j.ZP),{columns:e.columns,"custom-row":e=>({style:{background:`linear-gradient(120deg, ${e.color}, transparent ${100*e.width}%, transparent${e.color2?` ${100*(1-e.width2)}%, ${e.color2}`:""})`}}),"row-selection":e.showSelection?{columnTitle:e.selectionTitle,getCheckboxProps:t=>({disabled:e.selectionDisabled}),selectedRowKeys:e.selection,columnWidth:"104px",onChange:e=>a.$emit("update:selection",e)}:void 0,"show-sorter-tooltip":!1,"sort-directions":["descend","ascend"],pagination:!1,bordered:"",scroll:{x:"calc(max(100%, 1000px))",y:"calc(100vh - 260px)"}},{headerCell:(0,m.w5)((({column:e})=>[e.tooltip?((0,m.wg)(),(0,m.j4)((0,p.SU)(W.Z),{key:0,title:e.tooltip},{default:(0,m.w5)((()=>[(0,m.Uk)((0,k.zw)(e.title),1)])),_:2},1032,["title"])):(0,m.kq)("",!0)])),summary:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(j.ZP).Summary,{fixed:""},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(j.ZP).Summary.Row,null,{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(j.ZP).Summary.Cell),((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(t.columns,(({dataIndex:e})=>((0,m.wg)(),(0,m.j4)((0,p.SU)(j.ZP).Summary.Cell,{key:e},{default:(0,m.w5)((()=>[(0,m._)("div",{innerHTML:t.summary[e]},null,8,P)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["columns","custom-row","row-selection","scroll"]))}},E=a(89);const I=(0,E.Z)(F,[["__scopeId","data-v-0f8718a8"]]);var O=I,$={__name:"StrategySelector",setup(e){return(e,t)=>((0,m.wg)(),(0,m.j4)((0,p.SU)(r.ZP),{value:(0,p.SU)(_).strategy.type,"onUpdate:value":t[0]||(t[0]=e=>(0,p.SU)(_).strategy.type=e),options:[{label:"自动",value:(0,p.SU)(h)},{label:"全选",value:(0,p.SU)(U)},{label:"手动",value:(0,p.SU)(b)}]},null,8,["value","options"]))}};const C=$;var D=C,H={__name:"TimeSelector",setup(e){return(e,t)=>((0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m.Wm)((0,p.SU)(r.ZP),{value:(0,p.SU)(_).time.type,"onUpdate:value":t[0]||(t[0]=e=>(0,p.SU)(_).time.type=e),options:[{label:"无延迟",value:(0,p.SU)(g)},{label:"固定延迟",value:(0,p.SU)(S)},{label:"固定间隔",value:(0,p.SU)(x)},{label:"自定义（懒得写）",value:(0,p.SU)(w),disabled:!0}],"dropdown-match-select-width":!1},null,8,["value","options"]),(0,p.SU)(_).time.type!==(0,p.SU)(g)?((0,m.wg)(),(0,m.j4)((0,p.SU)(l.Z),{key:0,value:(0,p.SU)(Z),"onUpdate:value":t[1]||(t[1]=e=>(0,p.dq)(Z)?Z.value=e:null),min:0,max:86400,formatter:e=>{let t=e%60;while(e=parseInt(e/60))t=e%60+":"+t;return t},parser:e=>e.split(":").reduce(((e,t)=>60*e+parseInt(t||"0")))},null,8,["value","formatter","parser"])):(0,m.kq)("",!0)],64))}};const M=H;var q=M;const B=e=>((0,m.dD)("data-v-17657cc7"),e=e(),(0,m.Cn)(),e),L=B((()=>(0,m._)("br",null,null,-1))),Y={class:"secondary"};var z={__name:"TwoLineText",props:{majorText:String,minorText:String},setup(e){return(t,a)=>((0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("span",null,(0,k.zw)(e.majorText),1),L,(0,m._)("span",Y,(0,k.zw)(e.minorText),1)],64))}};const A=(0,E.Z)(z,[["__scopeId","data-v-17657cc7"]]);var J=A;const K=(0,m.Uk)(" 收益计算器 "),N=(0,m.Uk)(" --卡露蒂亚城乡结合部 ");var R={__name:"App",setup(e){const t=[{title:"名称",dataIndex:"name"},{title:"概率*",dataIndex:"probStr",sorter:(e,t)=>e.prob-t.prob},{title:(0,m.h)(J,{majorText:"孵化时间",minorText:"原始时间"}),dataIndex:"timeStr",sorter:(e,t)=>e.time-t.time,sortDirections:["ascend","descend"]},{title:"派遣金币",dataIndex:"money",sorter:(e,t)=>e.money-t.money},{title:"强化经验",dataIndex:"exp",sorter:(e,t)=>e.exp-t.exp},{title:"评分*",tooltip:"=max(派遣金币, 强化经验 * 经验价值) / 孵化时间",dataIndex:"rating",sorter:(e,t)=>e.rating-t.rating,defaultSortOrder:"descend"},{title:"效率/小时",dataIndex:"efficiency"}],a=(0,p.XI)(null),n=(0,p.iH)("2");let d=null;(0,m.bv)((()=>{f().get("eggs.json").then((e=>{d=e.data.eggs;let t={};for(let a in e.data.maps){let n=e.data.maps[a],l=[];for(let e in n.weight){const t=[.99,.01,0][parseInt(e)-1],a=y().sum(y().values(n.weight[e]));Object.entries(n.weight[e]).forEach((([e,n])=>{l.push({key:e,...d[e],prob:n/a*t})}))}t[a]={...e.data.maps[a],eggs:l},delete t[a].weight}a.value=t}))}));const v=(0,m.Fl)((()=>[{value:"overview",label:"总览"}].concat(y().toPairs(a.value).map((([e,t])=>({value:e,label:`${t.name} (${P(e).rating})`})))))),g=(0,m.Fl)((()=>"overview"!==n.value)),S=e=>{let t,a;const n=e=>[Math.floor(e/60),e%60];[a,e]=n(e),[t,a]=n(a);const l=e=>e.toString().padStart(2,"0");return`${l(t)}:${l(a)}:${l(e)}`},x=(0,m.Fl)((()=>{if(null===a.value)return[];if("overview"===n.value)return I();let e,t,l=a.value[n.value].eggs.map((a=>({...a,calcTime:e=T.value(a.time),expval:t=a.exp*_.expval,rating:y().max([a.money,t])/e*60})));const o=y().maxBy(l,(e=>e.rating)).rating;return l.forEach((e=>{e.width=e.rating/o,e.rating=e.rating.toFixed(2),e.timeStr=(0,m.h)(J,{majorText:S(e.calcTime),minorText:S(e.time)}),e.probStr=(100*e.prob).toFixed(3)+"%",e.color=e.money==e.expval?"#ffff80":e.money>e.expval?"#ff8080":"#8080ff",e.efficiency=e.money>=e.expval?(e.money/e.calcTime*3600).toFixed(2)+"金币":(e.exp/e.calcTime*3600).toFixed(2)+"经验"})),l})),w=e=>{const t=a.value[e].eggs.map((e=>({...e,value:y().max([e.money,e.exp*_.expval]),time:T.value(e.time)}))).sort(((e,t)=>t.value/t.time-e.value/e.time));let n=10*-a.value[e].price/11,l=0;const o=[];for(let a of t)n*a.time<=a.value*l&&(n+=a.value*a.prob,l+=a.time*a.prob,o.push(a.key));return o},Z=e=>a.value[e].eggs.map((e=>e.key)),W=e=>(void 0===_.strategy.manualSettings[e]&&(_.strategy.manualSettings[e]=Z(e)),_.strategy.manualSettings[e]),j=e=>null===a.value?[]:(void 0===e&&(e=n.value),"overview"===e?[]:_.strategy.type===h?w(e):_.strategy.type===U?Z(e):_.strategy.type===b?W(e):[]),k=(0,m.Fl)({get:j,set:e=>{_.strategy.type===b&&(_.strategy.manualSettings[n.value]=e)}}),P=e=>{if(void 0===e&&(e=n.value),"overview"===e)return[];const t=new Set(j(e)),l=a.value?.[e].eggs??[];let o=10*-(a.value?.[e].price??0)/11,r=0,i=0,u=0;l.forEach((e=>{t.has(e.key)&&(e.money>=e.exp*_.expval?o+=e.money*e.prob:r+=e.exp*e.prob,i+=T.value(e.time)*e.prob,u+=e.prob)}));const s=o/i*3600,c=r/i*3600;return{name:"总计",probStr:(100*u).toFixed(3)+"%",timeStr:S(Math.round(i))+"/抽",money:o.toFixed(2)+"/抽",exp:r.toFixed(2)+"/抽",rating:i?((o+r*_.expval)/i*60).toFixed(3):"--",moneyEffic:s,expEffic:c,efficiency:i?`${s.toFixed(2)}金币<br>${c.toFixed(2)}经验`:"--"}},F=(0,m.Fl)(P),E=(e,t,a,n,l)=>n+(e-t)*(l-n)/(a-t),I=()=>{const e=y().toPairs(a.value).map((([e,t])=>({...P(e),name:t.name})));let t=0,n=y().min([y().minBy(e,(e=>e.moneyEffic)).moneyEffic,0]);return e.forEach((e=>{let a=e.moneyEffic-n+e.expEffic*_.expval;a>t&&(t=a),e.moneyEffic<n&&(n=e.moneyEffic)})),e.forEach((e=>{e.color=e.moneyEffic>0?"#ff8080":"#ffbbbb",e.width=E(e.moneyEffic,n,t,0,1),e.color2="#8080ff",e.width2=E(e.expEffic*_.expval,0,t,0,1),e.efficiency=(0,m.h)("span",{innerHTML:e.efficiency}),e.width+e.width2>1&&console.log(e)})),e};return(e,a)=>((0,m.wg)(),(0,m.j4)((0,p.SU)(c.ZP),{class:"layout"},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(c.ZP).Header,null,{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(s.ZP).Title,{class:"title"},{default:(0,m.w5)((()=>[K,(0,m.Wm)((0,p.SU)(s.ZP).Title,{class:"subtitle",level:5},{default:(0,m.w5)((()=>[N])),_:1})])),_:1})])),_:1}),(0,m.Wm)((0,p.SU)(c.ZP).Content,{style:{padding:"0 50px"}},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(u.Z),null,{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(i.Z),{span:6},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(r.ZP),{value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e),options:(0,p.SU)(v),loading:1===(0,p.SU)(v).length,disabled:1===(0,p.SU)(v).length,"dropdown-match-select-width":!1},null,8,["value","options","loading","disabled"])])),_:1}),(0,m.Wm)((0,p.SU)(i.Z),{span:6},{default:(0,m.w5)((()=>[(0,m.Wm)(q)])),_:1}),(0,m.Wm)((0,p.SU)(i.Z),{span:2},{default:(0,m.w5)((()=>[(0,m.Wm)(J,{"major-text":"经验价值：","minor-text":"推荐?"})])),_:1}),(0,m.Wm)((0,p.SU)(i.Z),{span:6},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(o.Z),{value:(0,p.SU)(_).expval,"onUpdate:value":a[1]||(a[1]=e=>(0,p.SU)(_).expval=e),min:2,max:7,step:.01},null,8,["value","step"])])),_:1}),(0,m.Wm)((0,p.SU)(i.Z),{span:4},{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(l.Z),{value:(0,p.SU)(_).expval,"onUpdate:value":a[2]||(a[2]=e=>(0,p.SU)(_).expval=e),min:2,max:7,step:.05},null,8,["value","step"])])),_:1})])),_:1}),(0,m.Wm)((0,p.SU)(u.Z),null,{default:(0,m.w5)((()=>[(0,m.Wm)((0,p.SU)(i.Z),{span:24},{default:(0,m.w5)((()=>[(0,m.Wm)(O,{selection:(0,p.SU)(k),"onUpdate:selection":a[3]||(a[3]=e=>(0,p.dq)(k)?k.value=e:null),"data-source":(0,p.SU)(x),columns:t,"selection-title":(0,m.h)(D),"selection-disabled":(0,p.SU)(_).strategy.type!==(0,p.SU)(b),summary:(0,p.SU)(F),"show-selection":(0,p.SU)(g)},null,8,["selection","data-source","selection-title","selection-disabled","summary","show-selection"])])),_:1})])),_:1})])),_:1})])),_:1}))}};const X=(0,E.Z)(R,[["__scopeId","data-v-17eacb0e"]]);var G=X;(0,n.ri)(G).mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,o){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],o=e[c][2];for(var i=!0,u=0;u<n.length;u++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,r=n[0],i=n[1],u=n[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(u)var c=u(a)}for(t&&t(n);s<r.length;s++)o=r[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self["webpackChunkprofit"]=self["webpackChunkprofit"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9414)}));n=a.O(n)})();